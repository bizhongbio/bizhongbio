/*
Theme Name: Bizhongbio
Theme URI: https://github.com/bizhongbio/bizhongbio
Author: Bizhong Lan
Author URI: https://bizhong.github.io/
Description: Bizhongbio is a free, minimalistic, and responsive WordPress Blog Theme.
Version: 2.0.3
License: GNU General Public License v2 or later
License URI: http://www.gnu.org/licenses/gpl-2.0.html
Tags: blog, one-column, two-columns, left-sidebar, custom-header, custom-menu, featured-images, flexible-header, full-width-template, microformats, threaded-comments
Text Domain: bizhongbio

This theme, like WordPress, is licensed under the GPL.
Use it to make something cool, have fun, and share what you've learned with others.
*/
$(function(){switch($(document.body).attr('id')){case'home':handleHome();break;case'category':handleCategory();case'single':case'search':case'tag':catHeaderFixed();break;default:console.log('Bizhongbio is a free, minimalistic, and responsive WordPress Blog Theme.')}$('#btn-nav').on('click',function(){$('#header, #cat-header').toggleClass('show-nav');$('#btn-search').toggle();if($('#header, #cat-header').hasClass('show-nav')){$('#btn-nav i').removeClass('fa-navicon').addClass('fa-remove');$('body, html').on('touchmove',function(event){event.preventDefault()})}else{$('#btn-nav i').removeClass('fa-remove').addClass('fa-navicon');$('body, html').off('touchmove')}});$('#btn-search').on('click',function(){$('#searchform').fadeIn(300);$('#s').focus();if($('#mask').length>0){$('#mask').fadeIn(300)}else{$('<div id="mask"></div>').appendTo('body')}$('body, html').on('touchmove',function(event){event.preventDefault()});$('#mask').on('click',function(){$('#searchform').css('display','');$('#s').blur();$('#mask').fadeOut(150);$('body, html').off('touchmove')})});function catHeaderFixed(){var globalHeaderHeight=$('.global-header').height();$(window).on('scroll',function(){if($(this).scrollTop()>globalHeaderHeight){$('#cat-header').addClass('cat-header-fixed')}else{$('#cat-header').removeClass('cat-header-fixed')}})}$(window).on('scroll',function(){if($(this).scrollTop()>600){$('#go-top').fadeIn(300)}else{$('#go-top').fadeOut(150)}});$('#go-top').on('click',function(event){$('body, html').animate({'scrollTop':'0'},600);event.preventDefault()});function handleHome(){var len=$('#hero-slides .slide').length,slideIndex=1,timer=null,startPosition={},endPosition={},isScrolling=-1,onloading=false;function slidesAnimation(){$('#hero-slides .slide').each(function(i){$(this).eq(slideIndex).css('left','0%').end().not(slideIndex).css('left',(-(slideIndex-i)*100)+'%');$('.slides-nav a').eq(slideIndex).addClass('current').siblings().removeClass('current')});slideIndex>=len-1?slideIndex=0:slideIndex++}timer=setInterval(slidesAnimation,6000);$('.slides-nav a').each(function(){$(this).on('click',function(event){clearInterval(timer);slideIndex=$(this).index();slidesAnimation();event.preventDefault()})});$(document).on('keydown',function(event){switch(event.keyCode){case 37:clearInterval(timer);slideIndex>=2?slideIndex-=2:slideIndex+=2;slidesAnimation();break;case 39:clearInterval(timer);slidesAnimation();break}});$('#hero-slides').on('touchstart',function(event){var touch=event.targetTouches[0];startPosition={x:touch.pageX,y:touch.pageY}});$('#hero-slides').on('touchmove',function(event){if(event.targetTouches.length===1){var touch=event.targetTouches[0];endPosition={x:touch.pageX-startPosition.x,y:touch.pageY-startPosition.y};isScrolling=Math.abs(endPosition.x)>Math.abs(endPosition.y)?0:1;if(isScrolling===0){event.preventDefault()}}});$('#hero-slides').on('touchend',function(event){if(isScrolling===0){if(endPosition.x>10){clearInterval(timer);slideIndex>=2?slideIndex-=2:slideIndex+=2;slidesAnimation()}else if(endPosition.x<-10){clearInterval(timer);slidesAnimation()}}});if(!$('.load-more a').length){$('.load-more').remove()}$('.main').on('click','.load-more a',function(){if(onloading){return false}else{$.ajax({type:'get',url:$(this).attr('href'),beforeSend:function(xhr){xhr.setRequestHeader('X-Requested-With','XMLHttpRequest');$('.load-more').find('a').text('正在加载');onloading=true},error:function(request){console.log(request.responseText)},statusCode:{404:function(){console.log('404')}},success:function(data){var result=$(data).find('.articles .article'),nextHref=$(data).find('.load-more a').attr('href');$('.load-more').before(result.fadeIn(400));$('.load-more').find('a').text('加载更多');if(nextHref!=undefined){$('.load-more a').attr('href',nextHref)}else{$('.load-more').remove()}onloading=false}})}return false})}function handleCategory(){var onloading=false;if(!$('.load-more a').length){$('.load-more').remove()}$('.main').on('click','.load-more a',function(){if(onloading){return false}else{$.ajax({type:'get',url:$(this).attr('href'),beforeSend:function(xhr){xhr.setRequestHeader('X-Requested-With','XMLHttpRequest');$('.load-more i').show();onloading=true},error:function(request){console.log(request.responseText)},statusCode:{404:function(){console.log('404')}},success:function(data){var result=$(data).find('.posts .post'),nextHref=$(data).find('.load-more a').attr('href');$('.load-more').before(result.fadeIn(400));$('.load-more i').hide();if(nextHref!=undefined){$('.load-more a').attr('href',nextHref)}else{$('.load-more').remove()}onloading=false}})}return false});$(window).on('scroll',function(){var windowHeight=$(this).height(),documentHeight=$(document).height(),footerHeight=$('.footer').height();if($(document).scrollTop()+windowHeight>documentHeight-footerHeight){if(onloading){return false}else{$('.load-more a').click()}}})}});